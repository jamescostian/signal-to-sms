package mimetoext

// THIS FILE IS A MODIFIED VERSION OF THE ORIGINAL CODE FROM signal-back (WHICH IS DISTRIBUTED UNDER THE APACHE LICENSE, VERSION 2.0)

import "fmt"

// Convert gives you an extension (like "jpg") for a mime (like "image/jpeg")
func Convert(mime string) (string, error) {
	if mime == "" {
		return "", fmt.Errorf("no mime")
	}
	if ext, found := mapping[mime]; found {
		return ext, nil
	}
	return "", fmt.Errorf("mime type %v not recognized", mime)
}

var mapping = map[string]string{
	"image/jpg":                "jpg",
	"text/x-signal-plain":      "txt",
	"application/octet-stream": "",
	// From https://github.com/gabriel-vasile/mimetype
	"image/x-xpixmap":              "xpm",
	"application/x-7z-compressed":  "7z",
	"application/zip":              "zip",
	"application/x-zip":            "zip",
	"application/x-zip-compressed": "zip",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":         "xlsx",
	"application/vnd.openxmlformats-officedocument.wordprocessingml.document":   "docx",
	"application/vnd.openxmlformats-officedocument.presentationml.presentation": "pptx",
	"application/epub+zip":                                       "epub",
	"application/jar":                                            "jar",
	"application/vnd.oasis.opendocument.text":                    "odt",
	"application/x-vnd.oasis.opendocument.text":                  "odt",
	"application/vnd.oasis.opendocument.text-template":           "ott",
	"application/x-vnd.oasis.opendocument.text-template":         "ott",
	"application/vnd.oasis.opendocument.spreadsheet":             "ods",
	"application/x-vnd.oasis.opendocument.spreadsheet":           "ods",
	"application/vnd.oasis.opendocument.spreadsheet-template":    "ots",
	"application/x-vnd.oasis.opendocument.spreadsheet-template":  "ots",
	"application/vnd.oasis.opendocument.presentation":            "odp",
	"application/x-vnd.oasis.opendocument.presentation":          "odp",
	"application/vnd.oasis.opendocument.presentation-template":   "otp",
	"application/x-vnd.oasis.opendocument.presentation-template": "otp",
	"application/vnd.oasis.opendocument.graphics":                "odg",
	"application/x-vnd.oasis.opendocument.graphics":              "odg",
	"application/vnd.oasis.opendocument.graphics-template":       "otg",
	"application/x-vnd.oasis.opendocument.graphics-template":     "otg",
	"application/vnd.oasis.opendocument.formula":                 "odf",
	"application/x-vnd.oasis.opendocument.formula":               "odf",
	"application/vnd.oasis.opendocument.chart":                   "odc",
	"application/x-vnd.oasis.opendocument.chart":                 "odc",
	"application/vnd.sun.xml.calc":                               "sxc",
	"application/pdf":                                            "pdf",
	"application/x-pdf":                                          "pdf",
	"application/vnd.fdf":                                        "fdf",
	"application/vnd.ms-outlook":                                 "msg",
	"application/vnd.ms-excel":                                   "xls",
	"application/msexcel":                                        "xls",
	"application/vnd.ms-publisher":                               "pub",
	"application/vnd.ms-powerpoint":                              "ppt",
	"application/mspowerpoint":                                   "ppt",
	"application/msword":                                         "doc",
	"application/vnd.ms-word":                                    "doc",
	"application/postscript":                                     "ps",
	"image/vnd.adobe.photoshop":                                  "psd",
	"image/x-psd":                                                "psd",
	"application/photoshop":                                      "psd",
	"application/pkcs7-signature":                                "p7s",
	"application/ogg":                                            "ogg",
	"application/x-ogg":                                          "ogg",
	"audio/ogg":                                                  "oga",
	"video/ogg":                                                  "ogv",
	"image/png":                                                  "png",
	"image/jpeg":                                                 "jpg",
	"image/jxl":                                                  "jxl",
	"image/jp2":                                                  "jp2",
	"image/jpx":                                                  "jpf",
	"image/jpm":                                                  "jpm",
	"video/jpm":                                                  "jpm",
	"image/gif":                                                  "gif",
	"image/webp":                                                 "webp",
	"application/vnd.microsoft.portable-executable":              "exe",
	"application/x-sharedlib":                                    "so",
	"application/x-archive":                                      "a",
	"application/x-unix-archive":                                 "a",
	"application/vnd.debian.binary-package":                      "deb",
	"application/x-tar":                                          "tar",
	"application/x-xar":                                          "xar",
	"application/x-bzip2":                                        "bz2",
	"application/fits":                                           "fits",
	"image/tiff":                                                 "tiff",
	"image/bmp":                                                  "bmp",
	"image/x-bmp":                                                "bmp",
	"image/x-ms-bmp":                                             "bmp",
	"image/x-icon":                                               "ico",
	"audio/mpeg":                                                 "mp3",
	"audio/x-mpeg":                                               "mp3",
	"audio/mp3":                                                  "mp3",
	"audio/flac":                                                 "flac",
	"audio/midi":                                                 "midi",
	"audio/mid":                                                  "midi",
	"audio/sp-midi":                                              "midi",
	"audio/x-mid":                                                "midi",
	"audio/x-midi":                                               "midi",
	"audio/ape":                                                  "ape",
	"audio/musepack":                                             "mpc",
	"audio/amr":                                                  "amr",
	"audio/amr-nb":                                               "amr",
	"audio/wav":                                                  "wav",
	"audio/x-wav":                                                "wav",
	"audio/vnd.wave":                                             "wav",
	"audio/wave":                                                 "wav",
	"audio/aiff":                                                 "aiff",
	"audio/basic":                                                "au",
	"video/mpeg":                                                 "mpeg",
	"video/quicktime":                                            "mqv",
	"video/mp4":                                                  "mp4",
	"video/webm":                                                 "webm",
	"audio/webm":                                                 "webm",
	"video/3gpp2":                                                "3g2",
	"video/3g2":                                                  "3g2",
	"audio/3gpp2":                                                "3g2",
	"video/x-msvideo":                                            "avi",
	"video/avi":                                                  "avi",
	"video/msvideo":                                              "avi",
	"video/x-flv":                                                "flv",
	"video/x-matroska":                                           "mkv",
	"video/x-ms-asf":                                             "asf",
	"video/asf":                                                  "asf",
	"video/x-ms-wmv":                                             "asf",
	"audio/aac":                                                  "aac",
	"audio/x-unknown":                                            "voc",
	"audio/mp4":                                                  "mp4",
	"audio/x-m4a":                                                "m4a",
	"audio/x-mp4a":                                               "mp4",
	"application/vnd.apple.mpegurl":                              "m3u",
	"audio/mpegurl":                                              "m3u",
	"video/x-m4v":                                                "m4v",
	"application/vnd.rn-realmedia-vbr":                           "rmvb",
	"application/gzip":                                           "gz",
	"application/x-gzip":                                         "gz",
	"application/x-gunzip":                                       "gz",
	"application/gzipped":                                        "gz",
	"application/gzip-compressed":                                "gz",
	"application/x-gzip-compressed":                              "gz",
	"gzip/document":                                              "gz",
	"application/x-java-applet":                                  "class",
	"application/x-shockwave-flash":                              "swf",
	"application/x-chrome-extension":                             "crx",
	"font/ttf":                                                   "ttf",
	"font/sfnt":                                                  "ttf",
	"application/x-font-ttf":                                     "ttf",
	"application/font-sfnt":                                      "ttf",
	"font/woff":                                                  "woff",
	"font/woff2":                                                 "woff2",
	"font/otf":                                                   "otf",
	"application/vnd.ms-fontobject":                              "eot",
	"application/wasm":                                           "wasm",
	"application/x-dbf":                                          "dbf",
	"application/dicom":                                          "dcm",
	"application/x-rar-compressed":                               "rar",
	"application/x-rar":                                          "rar",
	"image/vnd.djvu":                                             "djvu",
	"application/x-mobipocket-ebook":                             "mobi",
	"application/x-ms-reader":                                    "lit",
	"image/bpg":                                                  "bpg",
	"application/x-sqlite3":                                      "sqlite",
	"image/vnd.dwg":                                              "dwg",
	"image/x-dwg":                                                "dwg",
	"application/acad":                                           "dwg",
	"application/x-acad":                                         "dwg",
	"application/autocad_dwg":                                    "dwg",
	"application/dwg":                                            "dwg",
	"application/x-dwg":                                          "dwg",
	"application/x-autocad":                                      "dwg",
	"drawing/dwg":                                                "dwg",
	"application/vnd.nintendo.snes.rom":                          "nes",
	"application/x-ms-shortcut":                                  "lnk",
	"application/x-mach-binary":                                  "macho",
	"audio/qcelp":                                                "qcp",
	"image/x-icns":                                               "icns",
	"image/heic":                                                 "heic",
	"image/heic-sequence":                                        "heic",
	"image/heif":                                                 "heif",
	"image/heif-sequence":                                        "heif",
	"image/vnd.radiance":                                         "hdr",
	"application/marc":                                           "mrc",
	"application/x-msaccess":                                     "accdb",
	"application/zstd":                                           "zst",
	"application/vnd.ms-cab-compressed":                          "cab",
	"application/x-rpm":                                          "rpm",
	"application/x-xz":                                           "xz",
	"application/lzip":                                           "lz",
	"application/x-bittorrent":                                   "torrent",
	"application/x-cpio":                                         "cpio",
	"image/x-xcf":                                                "xcf",
	"image/x-gimp-pat":                                           "pat",
	"image/x-gimp-gbr":                                           "gbr",
	"model/gltf-binary":                                          "glb",
	"text/plain":                                                 "txt",
	"text/html":                                                  "html",
	"image/svg+xml":                                              "svg",
	"text/xml":                                                   "xml",
	"application/rss+xml":                                        "rss",
	"text/rss":                                                   "rss",
	"application/atom+xml":                                       "atom",
	"model/x3d+xml":                                              "x3d",
	"application/vnd.google-earth.kml+xml":                       "kml",
	"application/x-xliff+xml":                                    "xlf",
	"model/vnd.collada+xml":                                      "dae",
	"application/gml+xml":                                        "gml",
	"application/gpx+xml":                                        "gpx",
	"application/vnd.garmin.tcx+xml":                             "tcx",
	"application/x-amf":                                          "amf",
	"application/vnd.ms-package.3dmanufacturing-3dmodel+xml": "3mf",
	"application/vnd.adobe.xfdf":                             "xfdf",
	"application/owl+xml":                                    "owl",
	"text/x-php":                                             "php",
	"application/javascript":                                 "js",
	"application/x-javascript":                               "js",
	"text/javascript":                                        "js",
	"text/x-lua":                                             "lua",
	"text/x-perl":                                            "pl",
	"application/x-python":                                   "py",
	"application/json":                                       "har",
	"application/geo+json":                                   "geojson",
	"application/x-ndjson":                                   "ndjson",
	"text/rtf":                                               "rtf",
	"text/x-tcl":                                             "tcl",
	"application/x-tcl":                                      "tcl",
	"text/csv":                                               "csv",
	"text/tab-separated-values":                              "tsv",
	"text/vcard":                                             "vcf",
	"text/calendar":                                          "ics",
	"application/warc":                                       "warc",
	"video/3gpp":                                             "3gp",
	"video/3gp":                                              "3gp",
	"audio/3gpp":                                             "3gp",
}
